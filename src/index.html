<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>Serverlessdays Milano</title>
    <meta
      name="description"
      content="Dev life using Serverless a talk for Serverlessday Milano"
    />
    <meta name="author" content="Vicrtoria Bernard" />
    <link
      rel="icon"
      type="image/png"
      href="images/Victoria_logo_gear.png"
    />
  </head>

  <body>
    <div class="reveal">
      <div class="slides">
        <section
          data-background-color="#fa6756"
          class="section-header"
        >
          <h1>Dev life using Serverless</h1>
          <h3>Victoria Bernard</h3>
          <h3>June 21, 2019</h3>
        </section>
        <section>
          <h2>Who am I?</h2>
          <div>
            <ul style="float: left">
              <li class="fragment fade-up">
                Engineer
              </li>
              <li class="fragment fade-up">
                Fat baby
              </li>
            </ul>
            <img
              class="fragment fade-up"
              src="images/me_baby.jpg"
              style="position: absolute; bottom: 32px; right: 0; width: 50%"
            />
          </div>
        </section>
        <section
          data-background="images/tools.jpg"
          style="text-align: right; justify-items: end"
        >
          <div
            style="background-color:rgba(255, 255, 255, 0.6); padding: 20px; display: inline-block"
          >
            <h1>Tools</h1>
          </div>
        </section>
        <!-- <section> -->
        <!-- Creative Commons Licence (by-nc-nd). See worditout.com for details -->
        <!-- https://worditout.com/word-cloud/3814509/private/663e0079e8ae59d8ddac7737c9dd10a8 -->
        <!-- <img class="plain" src="images/Cloud.png" />
        </section> -->
        <section
          data-background-color="#fa6756"
          class="section-header"
        >
          <span class="quote"
            >Is Serverless a tool that will stand the
            tests of times?</span
          >
        </section>

        <section
          data-transition="slide"
          data-background-transition="zoom"
          style="text-align: left;transition:none"
        >
          <h1>
            Serverless
          </h1>
          /ˈsəːvələs/<b> noun</b>
          <p>
            <!-- Not involving a server; composed only of clients. -->
            Compute without having to think about
            machine resource allocation.
            <!-- scaling code. -->
            <!-- cloud-computing execution model in which the cloud provider runs the server, and dynamically manages the allocation of machine resources. -->
          </p>
        </section>

        <section>
          <h1>
            Clouds Compete
          </h1>
          <img class="" src="images/cloud_fight.jpg" />
        </section>

        <section>
          <h2>
            What makes developers happy?
          </h2>
        </section>
        <section>
          <h1>Lazy</h1>
          <img
            class="plain"
            src="images/lazy-office-worker.png"
          />
        </section>
        <section>
          <h1>
            Truth
          </h1>
          <img
            class=""
            src="images/coffee_not_lazy.jpg"
          />
        </section>
        <section>
          <!-- data-background-color="#fa6756" class="section-header"> -->
          <span class="quote"
            >Developers fall in love when enabled to
            create.</span
          >
        </section>
        <section>
          <img
            src="images/twins.gif"
            style="height: 70%"
          />
          <div>
            <span class="quote"
              >“The things I do for love.”</span
            >
          </div>
        </section>
        <section
          data-background-color="#fa6756"
          class="section-header"
        >
          <span class="quote"
            >Long-lived tools are not just practical,
            they are useful in solving a magnitude of
            problems.</span
          >
        </section>

        <section style="text-align: left">
          <h2>
            Agenda
          </h2>
          <ul>
            <li>What it means to be useful</li>
            <li>Example of long-lived usefulness</li>
            <li>Apply to serverless</li>
          </ul>
        </section>
        <section
          data-transition="slide"
          data-background-transition="zoom"
          style="text-align: left;transition:none "
        >
          <h1>
            Useful
          </h1>
          /ˈyo͞osfəl/<b> adj.</b>
          <p>
            able to be used for a practical purpose or
            in several ways.
          </p>
        </section>

        <section
          data-transition="slide"
          data-background-transition="zoom"
          style="text-align: left;transition:none "
          class="fade-dark"
        >
          <h1>
            Useful
          </h1>
          /ˈyo͞osfəl/<b> adj.</b>
          <p>
            able to be used for a practical
            purpose<span class="emphasize">
              <span
                style="text-decoration: line-through"
              >
                or
              </span>
              and </span
            >in several ways.
          </p>
        </section>
        <section
          style="text-align: left; justify-items: end"
          data-background="images/qtip.jpg"
        >
          <div
            style="padding: 20px; display: inline-block"
          >
            <h1 class="white-text-img">QTips</h1>
            <p class="white-text-img">
              Over 550 billion units worldwide
            </p>
          </div>
        </section>
        <section
          data-transition="slide"
          data-background-transition="zoom"
          style="text-align: left;transition:none "
          class="fade-dark"
        >
          <h1>
            Useful
          </h1>
          /ˈyo͞osfəl/<b> adj.</b>
          <p>
            able to be used for a
            <span class="emphasize">practical </span
            >purpose and in several ways.
          </p>
        </section>
        <section>
          <h1>Practical</h1>
          <ul>
            <li>
              Cheap<img
                class="checkmark plain fragment fade-up"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              Accessible<img
                class="checkmark plain fragment fade-up"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              Easy to use<img
                class="checkmark plain fragment fade-up"
                src="images/checkmark.svg"
              />
            </li>
          </ul>
        </section>
        <section
          data-transition="slide"
          data-background-transition="zoom"
          class="fade-dark"
          style="text-align: left;transition:none "
        >
          <h1>
            Useful
          </h1>
          /ˈyo͞osfəl/<b> adj.</b>
          <p>
            able to be used for a practical purpose and
            <span class="emphasize"
              >in several ways.</span
            >
          </p>
        </section>
        <section>
          <div style="display: flex; height: 100%">
            <div
              style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: space-around;"
            >
              <h5>Clean ears</h5>
              <h5>Medicine</h5>
              <h5>Door Picking</h5>
              <h5>Makeup</h5>
            </div>
            <div
              style="flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: space-around;"
            >
              <img
                style="height: 30%; width: auto"
                src="images/qtip_clean.gif"
              />
              <img
                style="height: 30%; width: auto"
                src="images/qtip_boy.jpg"
              />
              <img
                style="height: 30%; width: auto"
                src="images/makeup_qtip.jpg"
              />
            </div>
          </div>
        </section>
        <section
          data-background-color="#fa6756"
          class="section-header"
        >
          <span class="quote"
            >Qtips are very useful.</span
          >
        </section>
        <section
          data-background-color="#fa6756"
          class="section-header"
        >
          <h1>Developer Tool Example</h1>
        </section>
        <section>
          <h1 style="height: 24%">Github</h1>
          <img
            style="height: 75%; margin: 0"
            src="images/Octocat.png"
          />
        </section>
        <section
          data-background-color="#fa6756"
          class="section-header"
        >
          <span class="quote">
            “I don’t feel comfortable not paying you
            guys. Can I just send a check?” </span
          ><br /><br /><br /><br />
          <span class="quote-credit">
            — Geoffrey Grosenbach, founder, PeepCode
          </span>
        </section>
        <section
          data-transition="slide"
          data-background-transition="zoom"
          style="text-align: left;transition:none "
          class="fade-dark"
        >
          <h1>
            Useful
          </h1>
          /ˈyo͞osfəl/<b> adj.</b>
          <p>
            able to be used for a
            <span class="emphasize">practical </span
            >purpose and in several ways.
          </p>
        </section>
        <section>
          <h1>Practical</h1>
          <ul>
            <li>
              Free<img
                class="checkmark plain fragment fade-up"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              Reliable<img
                class="checkmark plain fragment fade-up"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              uses
              <code class="javascript emphasize"
                >git</code
              ><img
                class="checkmark plain fragment fade-up"
                src="images/checkmark.svg"
              />
            </li>
          </ul>
        </section>
        <section
          data-transition="slide"
          data-background-transition="zoom"
          style=" "
        >
          <h1>
            Several ways
          </h1>
          <ul style="float: left">
            <li>Host code</li>
            <li>Comment on PRs</li>
            <li>Professional Networking</li>
            <li>Pages</li>
            <li>so much more...</li>
            <img
              class="fragment fade-up"
              src="images/twitter_linked.png"
              style="position: absolute; bottom: 32px; right: 0; width: 50%"
            />
          </ul>
        </section>
        <section style="transition:none">
          <span class="quote"
            >"You'll always be my lady."</span
          >
          <img src="images/tyrion-shae.jpg" />
        </section>
        <section
          data-transition="slide"
          style="transition:none "
          class=""
        >
          <span class="quote"
            >"You'll always be my lady."</span
          >
          <img src="images/tyrion_kill_shae.png" />
        </section>
        <section
          data-background-color="#fa6756"
          class="section-header"
        >
          <h1>Looking at Serverless</h1>
        </section>
        <section
          data-transition="slide"
          data-background-transition="zoom"
          style="text-align: left;transition:none "
        >
          <h1>
            Serverless
          </h1>
          /ˈsəːvələs/<b> noun</b>
          <p>
            <!-- Not involving a server; composed only of clients. -->
            Compute without having to think about
            machine resource allocation.
            <!-- scaling code. -->
            <!-- cloud-computing execution model in which the cloud provider runs the server, and dynamically manages the allocation of machine resources. -->
          </p>
        </section>
        <section
          data-transition="slide"
          data-background-transition="zoom"
          style="text-align: left;transition:none "
        >
          <h1>
            Useful
          </h1>
          /ˈyo͞osfəl/<b> adj.</b>
          <p>
            able to be used for a practical purpose and
            in several ways.
          </p>
        </section>
        <section
          data-transition="slide"
          data-background-transition="zoom"
          style="text-align: left;transition:none "
          class="fade-dark"
        >
          <h1>
            Useful
          </h1>
          /ˈyo͞osfəl/<b> adj.</b>
          <p>
            able to be used for a
            <span class="emphasize">practical </span
            >purpose and in several ways.
          </p>
        </section>
        <section>
          <h1>Practical</h1>
          <ul>
            <li>
              Anywhere<img
                class="checkmark plain fragment fade-up"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              Anytime<img
                class="checkmark plain fragment fade-up"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              Reasonable Price<img
                class="checkmark plain fragment fade-up"
                src="images/questionmark.svg"
              />
            </li>
            <li>
              Fast<img
                class="checkmark plain fragment fade-up"
                src="images/questionmark.svg"
              />
            </li>
          </ul>
        </section>
        <section>
          <h1 style="height: 25%">
            Cold Starts
          </h1>
          <video
            autoplay="true"
            loop="true"
            style="height: 70%"
          >
            <source
              src="images/coolstartsslowshits.mp4"
              type="video/mp4"
            />
          </video>
        </section>
        <section>
          <h1>Practical</h1>
          <ul>
            <li>
              Anywhere<img
                class="checkmark plain"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              Anytime<img
                class="checkmark plain"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              Reasonable Price (...for some)
              <img
                class="checkmark plain"
                src="images/checkmark.svg"
              />
            </li>
            <li>
              Fast (...for some)<img
                class="checkmark plain"
                src="images/checkmark.svg"
              />
            </li>
          </ul>
        </section>
        <section>
          <h1 style="height: 25%">Boss On Board</h1>
          <img
            style="height: 70%"
            src="images/boss.gif"
          />
        </section>
        <!-- <section data-background-color="#fa6756" class="section-header">
          <span class="quote">""</span>
        </section> -->

        <section
          data-background-color="#fa6756"
          class="section-header"
        >
          <h1>Hacks that make me love Serverless</h1>
        </section>
        <section>
          <h2>Browsers... Rocky Relationship</h2>
          <img src="images/cors.png" />
        </section>
        <section>
          <h2>Cors</h2>
          <img src="images/CORs issue.png" />
        </section>
        <section>
          <h2>Traditional Solutions</h2>
          <ul>
            <li>
              Have access to
              <code class="emphasize">api.com</code>
            </li>
            <li>
              Make requests from your server at
              <code class="emphasize">mysite.com</code>
            </li>
          </ul>
        </section>
        <section>
          <span>Fix <code>api.com</code></span>
          <pre><code> server {
            listen         80 default_server;
            listen         [::]:80 default_server;
            listen     443;
        
            server_name    slides.*;
        
            ssl        on;
            ssl_certificate       /usr/local/share/ca-cert/cert.pem;
            ssl_certificate_key     /usr/local/share/ca-cert/private.pem;
        
            client_max_body_size 5000M;
        
            root           /var/www/slides;
            index          index.html;
        
            location /favicon.ico{
                alias /var/www/victoriabernard.com/src/2016/04/Victoria_logo_gear.png;
            }
            location /serverless {
                root /var/www/slides/workers-slides-1002;
                index          index.html;
          
                if ($request_method = 'OPTIONS') {
                  add_header 'Access-Control-Allow-Origin' '*';
                  add_header 'Access-Control-Allow-Credentials' 'true';
                  add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
                  add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';
                  add_header 'Access-Control-Max-Age' 1728000;
                  add_header 'Content-Type' 'text/plain charset=UTF-8';
                  add_header 'Content-Length' 0;
                  return 204;
              }

                if ($request_method = 'POST') {
                    add_header 'Access-Control-Allow-Origin' '*';
                    add_header 'Access-Control-Allow-Credentials' 'true';
                    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
                    add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';

                }

                if ($request_method = 'GET') {

                    add_header 'Access-Control-Allow-Origin' '*';
                    add_header 'Access-Control-Allow-Credentials' 'true';
                    add_header 'Access-Control-Allow-Methods' 'GET, POST, OPTIONS';
                    add_header 'Access-Control-Allow-Headers' 'DNT,X-Mx-ReqToken,Keep-Alive,User-Agent,X-Requested-With,If-Modified-Since,Cache-Control,Content-Type';

                }
              }
              location /05-17-2018 {
                  root /var/www/slides/workers-slides-0517;
                  try_files $uri $uri/ /index.html;
                  if ($request_method = 'GET') {....

              }
              location /10-02-2018 {
                if ($request_method = 'GET') {...
          
                          
              ...
            
            }
          }
        }</code></pre>
          <div>
            Now do this for everything location
            block...
          </div>
        </section>
        <section>
          <h2>Make the call on mysite.com</h2>
          <img src="images/OriginCors.png" />
        </section>
        <section>
          <h2>Serverless Solution</h2>
          <img src="images/CORs solution.png" />
        </section>
        <section>
          <h2>Serverless Solution</h2>
          <div class="fragment fade-up">
            <div class="code-row">
              <div class="left-block">
                <p style="text-align: right;">
                  You want to run:
                </p>
              </div>
              <div class="right-block">
                <pre><code class="javascript" data-trim contenteditable style="font-size: 1em;">fetch('https://api.com') 
fetch('https://some-other-host-aint-me.com')</code></pre>
              </div>
            </div>
          </div>
          <div class="fragment fade-up">
            <div class="code-row">
              <div class="left-block">
                <p style="text-align: right;">
                  Instead I could call
                </p>
              </div>
              <div class="right-block">
                <pre><code class="javascript" data-trim contenteditable style="font-size: 1em;">
                  fetch('https://mysite.com/external/api.com') 
                  fetch(
                    'https://mysite.com/external/some-other-host-aint-me.com'
                  )</code></pre>
              </div>
            </div>
          </div>
          <div class="fragment fade-up">
            <div class="code-row">
              <div class="left-block">
                <p style="text-align: right;">
                  Setup a path on your own domain to
                  accept external requests
                </p>
              </div>
              <div class="right-block">
                <pre><code class="javascript" data-trim contenteditable style="font-size: 1em;">
                addEventListener('fetch', event => {
                  const { url } = event.request
                  if (url.includes('external'))
                    event.respondWith(fetchExternal(event.request))
                  event.respondWith(fetch(event.request))
                })
                
                function fetchExternal(request) {
                  const myExtralsURI = '/external/'
                  const strippedURI = request.url.split(
                    myExtralsURI
                  )[1]
                  return fetch('https://' + strippedURI, request)
                }
                </code></pre>
              </div>
            </div>
          </div>
        </section>
        <section><h1>Mock API</h1></section>
        <section>
          <h2>Traditional Solutions</h2>
          <ul>
            <li>
              Mock dev client in your code
            </li>
            <li>
              Setup Node on localhost, doesn't work in
              CI
            </li>
          </ul>
        </section>
        <section>
          <h1>Mock API</h1>
          <div class="fragment fade-up">
            <div class="code-row">
              <div class="left-block">
                <p style="text-align: right;">
                  Function that returns raw JSON as a
                  Response
                </p>
              </div>
              <div class="right-block">
                <pre><code class="javascript" data-trim contenteditable style="font-size: 1em;">
                 async function rawJsonResponse(json) {
                   const init = {
                     headers: {
                       'content-type': 'application/json;charset=UTF-8',
                     },
                   }
                 
                   return new Response(JSON.stringify(json), init)
                 }
            
                </code></pre>
              </div>
            </div>
          </div>
          <div class="fragment fade-up">
            <div class="code-row">
              <div class="left-block">
                <p style="text-align: right;">
                  Set event listener to return raw JSON
                  on
                  <code class="emphasize"
                    >/fake-json</code
                  >
                </p>
              </div>
              <div class="right-block">
                <pre><code class="javascript" data-trim contenteditable style="font-size: 1em;">
                 addEventListener('fetch', event => {
                   const { url } = event.request
                   if (url.includes('fake-json'))
                     event.respondWith(
                       rawJsonResponse({
                         mock: 'this',
                         bar: 'foo',
                       })
                     )
                   event.respondWith(fetch(event.request))
                 })                 
                </code></pre>
              </div>
            </div>
          </div>
        </section>
        <section>
          <h2>Several Other hacks</h2>
          <ul>
            <li>Aggregate JSON responses</li>
            <li>Direct requests based on region</li>
            <li>Maintenance page</li>
            <li>So much more..</li>
          </ul>
        </section>
        <section class="section-header">
          <span class="quote">
            Serverless fixes little but annoying and
            tedious problems while developing.
          </span>
        </section>
        <section>
          <h1>Serverless</h1>
          <ul>
            <li>Practical</li>
            <ul>
              <li>
                Anywhere<img class="checkmark plain" />
              </li>
              <li>
                Anytime<img class="checkmark plain" />
              </li>
              <li>
                Reasonable Price (...for some)
                <img class="checkmark plain" />
              </li>
              <li>
                Fast (...for some)<img
                  class="checkmark plain"
                />
              </li>
            </ul>
            <li>
              Used in
              <span class="emphasize"
                >several, even non-professional,
                ways</span
              >
            </li>
          </ul>
        </section>
        <section>
          <h2 style="height: 20%">Try it out</h2>
          <img
            style="height: 80%; margin: 0;"
            class="plain"
            src="images/workerpreview.png"
          />
        </section>
        <section>
          <h1>CLI - Wrangler</h1>
          <img
            class="plain"
            src="images/wrangler.png"
          />
        </section>
        <section>
          <h2>Templates</h2>
          <img
            style="height: 80%; margin: 0;"
            class="plain"
            src="images/templategall.png"
          />
        </section>
        <section>
          <h2>Sign Up, really it's free!</h2>
          <img
            style="height: 80%; margin: 0;"
            class="plain"
            src="images/qr_code.png"
          />
        </section>
        <!-- <section>
          <h2></h2>
          <img src="images/sansa.png" />
        </section> -->
        <section>
          <h2 style="height: 15%">
            Cersei is my never ending love
          </h2>
          <img
            style="height: 80%; margin: 0;"
            src="images/cersei.jpg"
          />
        </section>
        <section>
          <h1>Thank you!</h1>
          <img
            style="height: 60%; margin: 0;"
            class="plain"
            src="images/qr_code.png"
          />
        </section>
      </div>
    </div>
  </body>
</html>
